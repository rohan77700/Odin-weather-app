(()=>{const e=document.getElementById("weather-form"),t=document.getElementById("city"),n=document.getElementById("weather-output"),r=(document.getElementById("weather-wrapper"),document.getElementById("clear")),a=document.getElementById("celsius"),o=document.getElementById("fahrenheit"),i={0:"Clear sky ☀️ / 🌕",1:"Mainly clear 🌤 / 🌙",2:"Partly cloudy ⛅ / ☁️🌙",3:"Overcast ☁️",45:"Foggy 🌫",48:"Freezing fog ❄️🌫",51:"Light drizzle 🌦",53:"Moderate drizzle 🌦",55:"Dense drizzle 🌧",56:"Freezing light drizzle ❄️🌧",57:"Freezing dense drizzle ❄️🌧",61:"Slight rain 🌧",63:"Moderate rain 🌧",65:"Heavy rain 🌧🌧",66:"Freezing rain ❄️🌧",67:"Freezing heavy rain ❄️🌧🌧",71:"Light snow 🌨",73:"Moderate snow 🌨❄️",75:"Heavy snow 🌨❄️❄️",77:"Snow grains ❄️",80:"Light rain showers 🌦",81:"Moderate showers 🌧",82:"Violent rain ⛈",85:"Light snow showers 🌨",86:"Heavy snow showers 🌨❄️",95:"Thunderstorm ⛈",96:"Storm with hail ⛈🌨",99:"Severe storm with hail ⛈❄️"};let l=!0,d=null,s=null,c=null,u=null;function h(){const e=9*d/5+32,t=s/1.609,r=l?`${d.toFixed(1)}°C`:`${e.toFixed(1)}°F`,a=l?`${s.toFixed(1)} km/h`:`${t.toFixed(1)} mph`,o=(new Date).getHours(),h=o<6||o>=19;let g=i[c]||"Unknown Weather";h&&0===c?g="Clear sky 🌕":h&&1===c?g="Mainly clear 🌙":h&&2===c&&(g="Partly cloudy 🌙☁️"),n.innerHTML=`\n        <h2>${u}</h2>\n        <p><strong>${r}</strong></p>\n        <p>Wind: ${a}</p>\n        <p>${g}</p>\n    `}e.addEventListener("submit",(async e=>{e.preventDefault();const r=t.value.trim();if(r)try{const e=await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${r}`),t=(await e.json()).results[0],n=t.latitude,a=t.longitude,o=await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${n}&longitude=${a}&current_weather=true`),i=(await o.json()).current_weather;u=r,d=i.temperature,s=i.windspeed,c=i.weathercode,h(),function(e){const t=(new Date).getHours();document.body.style.background=t<6||t>=19?"var(--night-bg)":e>30?"var(--hot-bg)":e>20?"var(--warm-bg)":"var(--cold-bg)"}(d)}catch(e){console.error(e),n.innerHTML="<p>Could not fetch weather data.</p>"}})),a.addEventListener("click",(()=>{l||(l=!0,a.classList.add("active"),o.classList.remove("active"),null!==d&&h())})),o.addEventListener("click",(()=>{l&&(l=!1,o.classList.add("active"),a.classList.remove("active"),null!==d&&h())})),r.addEventListener("click",(()=>{t.value="",n.innerHTML="<h2>Weather App</h2><p>Enter a city to get started</p>",d=null,u=null,s=null,c=null,document.body.style.background="var(--cold-bg)"}))})();